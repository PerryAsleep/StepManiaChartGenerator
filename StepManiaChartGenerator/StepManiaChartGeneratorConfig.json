// See docs/Config.md for details.
{
	// Logger configuration.
	"LoggerConfig":
	{
		"LogLevel": "Info",
		"LogToFile": true,
		"LogDirectory": "C:\\Fumen\\Logs",
		"LogFlushIntervalSeconds": 20,
		"LogBufferSizeBytes": 10240,
		"LogToConsole": true,
	},

	"RegexTimeoutSeconds": 10.0,
	"CloseAutomaticallyWhenComplete": false,

	"InputDirectory": "C:\\Games\\StepMania 5\\Songs",
	"InputNameRegex": ".*\\.(sm|ssc)$",
	"InputChartType": "dance-single",
	"DifficultyRegex": ".",

	"OutputDirectory": "C:\\Fumen\\Exports",
	"OutputChartType": "dance-double",
	"OverwriteBehavior": "IfFumenGenerated",
	"NonChartFileCopyBehavior": "DoNotCopy",

	"OutputVisualizations": false,
	"VisualizationsDirectory": "C:\\Fumen\\Visualizations",

	"WarnOnDroppedSteps": true,

	"DefaultExpressedChartConfig": "BalancedDynamic",
	"DefaultPerformedChartConfig": "Default",

	"ExpressedChartConfigRules":
	[
		//{"FileRegex": ".*(\\\\|/)MyPackWithNoBrackets.*(\\\\|/).*", "DifficultyRegex": ".", "Config": "NoBrackets"},
	],

	"PerformedChartConfigRules":
	[
		//{"FileRegex": ".*(\\\\|/)MyStaminaPack.*(\\\\|/).*", "DifficultyRegex": ".", "Config": "Stamina"},
	],

	"ExpressedChartConfigs":
	{
		"BalancedDynamic":
		{
			"DefaultBracketParsingMethod": "Balanced",
			"BracketParsingDetermination": "ChooseMethodDynamically",
			"MinLevelForBrackets": 7,
			"UseAggressiveBracketsWhenMoreSimultaneousNotesThanCanBeCoveredWithoutBrackets": true,
			// Interpret charts with three brackets per minute or more as charts which should aggressively interpret bracketable jumps as brackets.
			"BalancedBracketsPerMinuteForAggressiveBrackets": 3.0,
			// Interpret charts with one bracket every minute or less as charts which should not have brackets.
			// Many non-technical charts have jumps with patterns which can reasonably be done by bracketing. With balanced
			// parsing, these charts would produce brackets. This threshold helps keeps non-technical charts bracket-free.
			"BalancedBracketsPerMinuteForNoBrackets": 1.0,
		},
		"NoBrackets":
		{
			"DefaultBracketParsingMethod": "NoBrackets",
			"BracketParsingDetermination": "UseDefaultMethod",
		},
		"AggressiveBrackets":
		{
			"DefaultBracketParsingMethod": "Aggressive",
			"BracketParsingDetermination": "UseDefaultMethod",
		}
	},

	"PerformedChartConfigs":
	{
		// Balanced default settings.
		"Default":
		{
			"ArrowWeights":
			{
				"dance-single": [25, 25, 25, 25],						// Determined without parsing charts.
				"dance-double": [6, 12, 10, 22, 22, 12, 10, 6],			// Determined by parsing a large number of community-made charts.
				"dance-solo": [13, 12, 25, 25, 12, 13],					// Determined without parsing charts.
				"dance-threepanel": [25, 50, 25],						// Determined without parsing charts.

				"pump-single": [17, 16, 34, 16, 17],					// Determined without parsing charts.
				"pump-halfdouble": [25, 12, 13, 13, 12, 25],			// Determined without parsing charts.
				"pump-double": [4, 4, 17, 12, 13, 13, 12, 17, 4, 4],	// Determined without parsing charts.

				"smx-beginner": [25, 50, 25],							// Determined without parsing charts.
				"smx-single": [25, 21, 8, 21, 25],						// Determined by parsing a small number of SMX charts.
				"smx-dual": [8, 17, 25, 25, 17, 8],						// Determined without parsing charts.
				"smx-full": [6, 8, 7, 8, 22, 22, 8, 7, 8, 6],			// Determined by parsing a small number of SMX charts.
			},

			"StepTightening":
			{
				// Do not modify the x dimension for distance measurements.
				"DistanceCompensationX": 0.0,
				// Subtract a half arrow from the y dimension for distance measurements.
				"DistanceCompensationY": 0.5,
				
				// Enable distance tightening.
				"DistanceTighteningEnabled": true,
				// Start limiting steps moving at 2.25 arrow lengths.
				"DistanceMin": 2.25,
				// Stop increasing costs for moves at 3 arrow lengths.
				"DistanceMax": 3.0,

				// Enable speed tightening.
				"SpeedTighteningEnabled": true,
				// Stop increasing costs at 16th notes at 170bpm.
				"SpeedMinTimeSeconds": 0.176471,
				// Start limiting at 16th notes at 125bpm.
				"SpeedMaxTimeSeconds": 0.24,

				// Enable stretch tightening.
				"StretchTighteningEnabled": true,
				// Start limiting stretch moving at 3 arrow lengths.
				"StretchDistanceMin": 3.0,
				// Stop increasing costs for stretch moves at 4 arrow lengths.
				"StretchDistanceMax": 4.0,
			},

			"LateralTightening":
			{
				// Enable lateral tightening.
				"Enabled": true,
				// Penalize lateral movement steps that are 1.65 times as dense as the chart average.
				"RelativeNPS": 1.65,
				// Penalize lateral movement steps that are over 12 notes per second.
				"AbsoluteNPS": 12.0,
				// The body must be moving at least 3 arrow widths per second for lateral tightening to penalize steps.
				"Speed": 3.0,
			},

			"Facing":
			{
				// Do not penalize inward facing steps.
				"MaxInwardPercentage": 1.0,
				"InwardPercentageCutoff": 0.5,
				// Do not penalize outward facing steps.
				"MaxOutwardPercentage": 1.0,
				"OutwardPercentageCutoff": 0.5,
			},

			"Transitions":
			{
				// Do not enable transition limits.
				"Enabled": false,
			},
		},
		"Stamina":
		{
			"StepTightening":
			{
				// This higher threshold would tighten up
				// normal charts too aggressively but for stamina charts it is better to err on
				// tight steps, especially for doubles. Even bpms in the low 110s feel bad when
				// streaming 16ths and having to move more than a bracket distance.
				"TravelSpeedMaxTimeSeconds": 0.303,		// 16ths at 99
			},

			"Transitions":
			{
				// Limit transitions for stamina charts.
				"Enabled": true,
				// Prefer steps which do not transition more than once every two measures.
				"StepsPerTransitionMin": 32,
				// Do not penalize slow transitions.
				"StepsPerTransitionMax": 1024,
				// Don't limit transitions for narrow ChartTypes.
				"MinimumPadWidth": 5,
				// Consider a transition to be moving from one half of the pads to the other half.
				"TransitionCutoffPercentage": 0.5,
			},
		},
	},
}